<!DOCTYPE html>
<html>
<head>
    <title>Multi-RSS Proposal Portal</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; background: #f5f5f5; }
        .header { background: #2c3e50; color: white; padding: 20px; }
        .nav-tabs { background: #34495e; padding: 0; margin: 0; display: flex; }
        .nav-tab { padding: 15px 25px; color: white; text-decoration: none; border-right: 1px solid #2c3e50; }
        .nav-tab:hover { background: #2c3e50; }
        .nav-tab.active { background: #3498db; }
        .admin-tab { margin-left: auto; background: #e74c3c; }
        .container { max-width: 1200px; margin: 20px auto; padding: 0 20px; }
        .welcome { background: white; padding: 30px; border-radius: 8px; text-align: center; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0; }
        .stat-card { background: white; padding: 20px; border-radius: 8px; text-align: center; }
        .stat-number { font-size: 2em; font-weight: bold; color: #3498db; }
        .feed-card { background: white; padding: 20px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #3498db; }
        .feed-name { font-size: 18px; font-weight: bold; margin-bottom: 10px; }
        .feed-url { color: #7f8c8d; font-size: 14px; margin-bottom: 10px; }
        .feed-status { display: inline-block; padding: 5px 10px; border-radius: 15px; font-size: 12px; }
        .status-active { background: #d4edda; color: #155724; }
        .status-paused { background: #f8d7da; color: #721c24; }
        .btn { padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin: 5px; text-decoration: none; display: inline-block; }
        .btn-primary { background: #3498db; color: white; }
        .btn-success { background: #27ae60; color: white; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üöÄ Multi-RSS Proposal Portal</h1>
        <p>Manage multiple job feeds with custom prompts</p>
    </div>

    <div class="nav-tabs">
        <a href="/" class="nav-tab active">Dashboard</a>
        {% for feed in feeds %}
        <a href="/rss/{{ feed[0] }}" class="nav-tab">
            {{ feed[1] }}
            {% if feed[3] == 0 %}<span style="opacity: 0.5;"> (Paused)</span>{% endif %}
        </a>
        {% endfor %}
        <a href="/enriched-jobs" class="nav-tab">‚úÖ Enriched</a>
        <a href="/team-management" class="nav-tab">üë• Team</a>
        <a href="/admin" class="nav-tab admin-tab">‚öôÔ∏è Admin</a>
        <a href="/logout" class="nav-tab" style="background: #e74c3c; margin-left: 10px;">üö™ Logout</a>
    </div>

    <div class="container">
        <div class="welcome">
            <h2>Welcome to Your Proposal Portal</h2>
            <p>Select a job feed from the tabs above to view jobs and generate proposals</p>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number">{{ feeds|length }}</div>
                <div>RSS Feeds</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="total-jobs">0</div>
                <div>Total Jobs</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="active-feeds">{{ feeds|selectattr('3', 'equalto', 1)|list|length }}</div>
                <div>Active Feeds</div>
            </div>
        </div>

        <h3>RSS Feeds Overview</h3>
        {% for feed in feeds %}
        <div class="feed-card">
            <div class="feed-name">{{ feed[1] }}</div>
            <div class="feed-url">{{ feed[2] }}</div>
            <div>
                <span class="feed-status {% if feed[3] == 1 %}status-active{% else %}status-paused{% endif %}">
                    {% if feed[3] == 1 %}Active{% else %}Paused{% endif %}
                </span>
            </div>
            <div style="margin-top: 15px;">
                <a href="/rss/{{ feed[0] }}" class="btn btn-primary">View Jobs</a>
                <a href="/admin#feed-{{ feed[0] }}" class="btn btn-success">Edit Prompts</a>
            </div>
        </div>
        {% endfor %}
    </div>

    <script>
        // Auto-refresh every 5 minutes
        setInterval(() => location.reload(), 300000);
    </script>
</body>
</html>